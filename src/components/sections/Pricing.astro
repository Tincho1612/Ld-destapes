---
import Container from '../ui/Container.astro';
import Section from '../ui/Section.astro';
import { getTranslations, getLocaleFromPath } from '@/i18n';
import Button from '@/react/ui/Button';
import { WHATSAPP_LINK } from '@/lib/constants';

const locale = getLocaleFromPath(Astro.url.pathname);
const t = getTranslations(locale);
---

<Section id="pricing" variant="alt">
  <Container>
    <div class="text-center max-w-3xl mx-auto animate-on-scroll">
      <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-neutral-900 mb-4">
        {t.pricing.title}
      </h2>
      <p class="text-lg sm:text-xl text-neutral-600 mb-8 leading-relaxed">
        {t.pricing.subtitle}
      </p>
      <div class="bg-white p-8 sm:p-12 rounded-xl shadow-lg border border-neutral-200">
        <p class="text-neutral-700 mb-8 text-lg">
          {t.pricing.description}
        </p>
        <Button
          client:load
          href={WHATSAPP_LINK}
          variant="primary"
          class="text-lg px-8 py-4"
          target="_blank"
          rel="noopener noreferrer"
        >
          {t.pricing.cta}
        </Button>
      </div>
    </div>
  </Container>
</Section>

<script>
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px',
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);

  document.querySelectorAll('.animate-on-scroll').forEach((el) => {
    observer.observe(el);
  });
</script>
