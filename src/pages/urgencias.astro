---
import BaseLayout from '@/layouts/BaseLayout.astro';
import Container from '@/components/ui/Container.astro';
import Section from '@/components/ui/Section.astro';
import Button from '@/react/ui/Button';
import Icon from '@/react/ui/Icon';
import EmergencyServiceSchema from '@/components/ui/EmergencyServiceSchema.astro';
import { getTranslations, getLocaleFromPath } from '@/i18n';
import { WHATSAPP_LINK } from '@/lib/constants';

const locale = getLocaleFromPath(Astro.url.pathname);
const t = getTranslations(locale);

if (!t.urgencias) {
  return Astro.redirect('/');
}
---
<BaseLayout
  title="Destapes Urgentes Mar del Plata - Servicio 24/7 | Destapes el Toro"
  description="Destapes urgentes Mar del Plata disponibles 24/7, 365 días. Especialistas en destapes de cañerías urgentes y destape de cloacas urgente. Contactanos por WhatsApp para atención inmediata."
>
  <EmergencyServiceSchema />
  <!-- Hero Section -->
  <section class="relative min-h-[60vh] flex items-center justify-center overflow-hidden bg-gradient-to-b from-white to-neutral-50 pt-20">
    <Container>
      <div class="relative z-10 text-center max-w-4xl mx-auto animate-fade-in">
        <h1 class="text-4xl sm:text-5xl lg:text-6xl font-bold text-neutral-900 mb-6 leading-tight">
          {t.urgencias.hero.title}
        </h1>
        <p class="text-lg sm:text-xl text-neutral-600 mb-10 max-w-2xl mx-auto leading-relaxed">
          {t.urgencias.hero.description}
        </p>
        <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
          <Button
            client:load
            href={WHATSAPP_LINK}
            variant="primary"
            className="w-full sm:w-auto text-lg px-8 py-4"
            target="_blank"
            rel="noopener noreferrer"
          >
            {t.urgencias.hero.cta}
          </Button>
          <Button
            client:load
            href="/#features"
            variant="secondary"
            className="w-full sm:w-auto text-lg px-8 py-4"
          >
            {t.urgencias.hero.ctaSecondary}
          </Button>
        </div>
      </div>
    </Container>
  </section>

  <!-- Availability Section -->
  <Section id="disponibilidad">
    <Container>
      <div class="text-center mb-12 sm:mb-16">
        <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-neutral-900 mb-4">
          {t.urgencias.availability.title}
        </h2>
        <p class="text-lg text-neutral-600 max-w-3xl mx-auto leading-relaxed">
          {t.urgencias.availability.description}
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-8 lg:gap-10">
        {t.urgencias.availability.items.map((item, index) => {
          const icons = ['Clock', 'Wrench', 'Shield', 'DollarSign'];
          const iconName = icons[index] || 'Shield';
          return (
            <div
              class="bg-white p-6 sm:p-8 rounded-xl shadow-sm border border-neutral-200 hover:shadow-md transition-shadow animate-on-scroll"
            >
              <div class="w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center mb-4">
                <Icon client:load name={iconName} className="w-6 h-6 text-primary-700" />
              </div>
              <h3 class="text-xl font-semibold text-neutral-900 mb-3">
                {item.title}
              </h3>
              <p class="text-neutral-600 leading-relaxed">
                {item.description}
              </p>
            </div>
          );
        })}
      </div>
    </Container>
  </Section>

  <!-- Services Section -->
  <Section id="servicios-urgencia" variant="alt">
    <Container>
      <div class="text-center mb-12 sm:mb-16">
        <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-neutral-900 mb-4">
          {t.urgencias.services.title}
        </h2>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6 sm:gap-8">
        {t.urgencias.services.items.map((service) => (
          <div
            class="bg-white p-6 sm:p-8 rounded-xl shadow-sm border border-neutral-200 hover:shadow-md transition-shadow animate-on-scroll"
          >
            <h3 class="text-xl font-semibold text-neutral-900 mb-3">
              {service.title}
            </h3>
            <p class="text-neutral-600 leading-relaxed">
              {service.description}
            </p>
          </div>
        ))}
      </div>
    </Container>
  </Section>

  <!-- Contact Process Section -->
  <Section id="como-contactar">
    <Container>
      <div class="text-center mb-12 sm:mb-16">
        <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-neutral-900 mb-4">
          {t.urgencias.contact.title}
        </h2>
        <p class="text-lg text-neutral-600 max-w-3xl mx-auto leading-relaxed">
          {t.urgencias.contact.description}
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8">
        {t.urgencias.contact.steps.map((step, index) => (
          <div
            class="bg-white p-6 sm:p-8 rounded-xl shadow-sm border border-neutral-200 hover:shadow-md transition-shadow animate-on-scroll text-center"
          >
            <div class="w-16 h-16 bg-primary-700 text-white rounded-full flex items-center justify-center text-2xl font-bold mx-auto mb-4">
              {index + 1}
            </div>
            <h3 class="text-lg font-semibold text-neutral-900 mb-3">
              {step.title}
            </h3>
            <p class="text-neutral-600 leading-relaxed text-sm">
              {step.description}
            </p>
          </div>
        ))}
      </div>
    </Container>
  </Section>

  <!-- Coverage Areas Section -->
  <Section id="zonas-cobertura" variant="alt">
    <Container>
      <div class="text-center mb-12 sm:mb-16">
        <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold text-neutral-900 mb-4">
          {t.urgencias.areas.title}
        </h2>
        <p class="text-lg text-neutral-600 max-w-3xl mx-auto leading-relaxed">
          {t.urgencias.areas.description}
        </p>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 sm:gap-8">
        {t.urgencias.areas.items.map((area) => (
          <div
            class="bg-white p-6 sm:p-8 rounded-xl shadow-sm border border-neutral-200 hover:shadow-md transition-shadow animate-on-scroll"
          >
            <div class="w-12 h-12 bg-primary-100 rounded-lg flex items-center justify-center mb-4">
              <Icon client:load name="MapPin" className="w-6 h-6 text-primary-700" />
            </div>
            <h3 class="text-xl font-semibold text-neutral-900 mb-3">
              {area.name}
            </h3>
            <p class="text-neutral-600 leading-relaxed">
              {area.description}
            </p>
          </div>
        ))}
      </div>
    </Container>
  </Section>

  <!-- Final CTA Section -->
  <Section id="contacto-urgencia" class="bg-primary-700 text-white">
    <Container>
      <div class="text-center max-w-3xl mx-auto animate-fade-in">
        <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold mb-4">
          {t.urgencias.cta.title}
        </h2>
        <p class="text-lg sm:text-xl text-primary-100 mb-8 leading-relaxed">
          {t.urgencias.cta.subtitle}
        </p>
        <Button
          client:load
          href={WHATSAPP_LINK}
          variant="secondary"
          className="bg-white text-primary-700 hover:bg-primary-50 text-lg px-8 py-4"
          target="_blank"
          rel="noopener noreferrer"
        >
          {t.urgencias.cta.button}
        </Button>
      </div>
    </Container>
  </Section>
</BaseLayout>

<script>
  const observerOptions = {
    threshold: 0.1,
    rootMargin: '0px 0px -50px 0px',
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);

  document.querySelectorAll('.animate-on-scroll').forEach((el) => {
    observer.observe(el);
  });
</script>

<style>
  .animate-on-scroll {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  .animate-on-scroll.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .animate-fade-in {
    animation: fadeIn 0.6s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
</style>
